# hii-lang syntax


## プログラム

プログラムは1行目から書き始めることができる
(C言語のmain関数のようなものはない)


## コメント

'#'で始まる行はコメント

    # これはコメントです
    a = 10 # 文の後にも書ける


## 変数と定数

代入文によりローカル変数or定数が定義され、値が割り当てられる
名前の先頭に'$'を付けると変数となり、再代入が可能となる

代入文の書式
{変数名} = {式}

    a = 10   # 定数aが定義されてaに10が代入される
    $b = 20  # 変数bが定義されてbに20が代入される

再代入文の書式
{変数名} := {式}

    $b = 20
    $b := 30


## 文

- 代入文 (=)
- 再代入文 (:=)
- 単行演算文
    - インクリメント/デクリメント文 (++, --)
- 2項演算文
    - 演算再代入文 (+=, -=, \*=, /=)
- 関数定義文 (fun)
- return文 (ret)
- 関数呼び出し文
- 分岐
    - if文 (if-elif-else)
    - switch文 (sw-case-else)
- 繰り返し
    - loop文
    - continue文
    - break文


## 式

- 単項マイナス (-)
- 算術演算 (+, -, \*, /, %)
- 比較演算 (==, !=, \<, \<=, =>, >, \<=>)
- 論理演算 (and, or)
- 演算子の優先順位の変更 (())
- 関数呼び出し
- 要素の参照 ([], .)
- スライス ([])
- リテラル
    - 整数
    - 文字列
    - 配列 ([])
    - 辞書 ([])

優先順位変更のための括弧を使用できる

    p (1 + 2) * 3

関数呼び出しを式に含めることができる

    fun add a, b
        ret a + b
    end
    p add 1, 2

XXX 優先順位の問題で括弧が必要な場合がある

    x = 2
    #p x - 1  # 関数xは未定義です => 関数呼び出し`x - 1`と判断される
    p (x) - 1  # ok


## 関数

関数定義文の書式
fun {関数名} {仮引数}
    {処理}
end

    fun add a, b
        ret a + b
    end

関数呼び出し文の書式
{関数名} {引数列}

    p 10


## 条件分岐

if文の書式
if {式}
    {処理}
elif {式}
    {処理}
else
    {処理}
end

switch文の書式
sw {式}
case {式}
    {処理}
else
    {処理}
end

以下のようにcase,elseを1行に書くことも可能
sw {式}
case {式}: {処理}
else: {処理}
end


## 繰り返し


### 無限ループ
loop
  p 10
end

### n回の繰り返し
loop n
  p 10
end

### 条件を満たす間の繰り返し(while)
loop a < b
end

### コレクションの走査
for e in c
  p e
end

for k,v in c
  p k + ":" + v
end


## 関数定義

fn {関数名} {引数1}[, {引数2}[, ...]]

ret [{式}]

